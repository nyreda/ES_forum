{% extends 'layout.html' %}
{% block content %}
    {% load static %}
    <title>登录</title>
    <div>
        <form method="post" novalidate class=".form-group"
              style="position: absolute; width: 50%;top: 40%; left: 50%; transform: translate(-50%,-50%);">
            <h3>登录</h3>
            <h5>三日内将保持登录</h5>
            {% csrf_token %}
            <div class="form-group">
                <label>邮箱</label>
                {{ form.email }}
                <span style="color: red;">{{ form.email.errors.0 }}</span>
            </div>
            <div class="form-group">
                <label>密码</label>
                {{ form.password }}
                <span style="color: red">{{ form.password.errors.0 }}</span>
            </div>
            <div class="form-group">
                <label for="id_code">图片验证码</label>
                <div class="row">
                    <div class="col-xs-7">
                        {{ form.code }}
                        <span style="color: red;">{{ form.code.errors.0 }}</span>
                    </div>
                    <div class="col-xs-5">
                        <a>
                            <img onclick="this.setAttribute('src','/image/refresh/')" alt="image code" id="image_code"
                                 src="/image/code/" style="height: 40px;">
                        </a>
                    </div>
                    <a class="btn btn-link" href="/forgot/pwd/">忘记密码？</a>
                </div>
            </div>
            <button type="submit" class="btn btn-default">提交</button>
            <a href="/signIn/" class="btn btn-default">去注册</a>
            <a href="/home/" class="btn btn-default">去主页</a>
            <span style="color: red;">{{ msg1 }}</span>
        </form>
    </div>

{% endblock %}




{% block js %}
    <script>        //ajax
    $(function () {
        //页面框架加载完成后自动执行
        getCodeEvent();
    })

    function getCodeEvent() {
        $("#image_code").click(function () {
            $.ajax({
                url: '/image/refresh/',
                type: "post",
                data: "刷新图片验证码",
                //dataType:"JSON",
                success: function (res) {

                }
            })
        })
    }
    </script>
{% endblock %}

